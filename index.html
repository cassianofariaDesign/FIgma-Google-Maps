<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Mapa Interativo - MapTiler</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- MapLibre GL JS (usado pelo MapTiler) -->
  <script src="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.js"></script>
  <link href="https://unpkg.com/maplibre-gl@3.6.1/dist/maplibre-gl.css" rel="stylesheet" />
  
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
    .info {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      font-family: sans-serif;
    }
    button {
      margin-top: 5px;
      width: 100%;
      padding: 5px;
      border: none;
      background: #007bff;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <div class="info">
    <h3>Mapa Interativo</h3>
    <button id="btn-localizacao">Minha localiza√ß√£o</button>
    <button id="btn-reset">Centralizar mapa</button>
  </div>

  <script>
    // üîë Sua chave do MapTiler
    const key = 'e8BaqrE45o6z9Xmtkmrt';

    // üó∫Ô∏è Posi√ß√£o inicial (S√£o Paulo)
    const posicaoInicial = [-46.6333, -23.5505];

    // Cria o mapa usando MapLibre (MapTiler)
    const map = new maplibregl.Map({
      container: 'map',
      style: `https://api.maptiler.com/maps/streets/style.json?key=${key}`,
      center: posicaoInicial,
      zoom: 12
    });

    // Adiciona controles de navega√ß√£o
    map.addControl(new maplibregl.NavigationControl());

    // Marcador fixo no ponto inicial
    const marcador = new maplibregl.Marker({ color: 'red' })
      .setLngLat(posicaoInicial)
      .setPopup(new maplibregl.Popup().setText('Ponto inicial'))
      .addTo(map);

    // Bot√£o: mostrar localiza√ß√£o atual
    document.getElementById('btn-localizacao').addEventListener('click', () => {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(pos => {
          const lng = pos.coords.longitude;
          const lat = pos.coords.latitude;
          map.flyTo({ center: [lng, lat], zoom: 14 });
          new maplibregl.Marker({ color: 'blue' })
            .setLngLat([lng, lat])
            .setPopup(new maplibregl.Popup().setText('Voc√™ est√° aqui!'))
            .addTo(map);
        }, () => {
          alert('N√£o foi poss√≠vel obter sua localiza√ß√£o.');
        });
      } else {
        alert('Geolocaliza√ß√£o n√£o suportada pelo seu navegador.');
      }
    });

    // Bot√£o: resetar para posi√ß√£o inicial
    document.getElementById('btn-reset').addEventListener('click', () => {
      map.flyTo({ center: posicaoInicial, zoom: 12 });
    });
  </script>
</body>
</html>
